AmCharts.addInitHandler(function(n){var t={name:"export",version:"1.1.0",libs:{async:!0,autoLoad:!0,reload:!1,path:(n.path||"")+"plugins/export/libs/",resources:[{"pdfmake/pdfmake.js":["pdfmake/vfs_fonts.js"],"jszip/jszip.js":["xlsx/xlsx.js"]},"fabric.js/fabric.js","FileSaver.js/FileSaver.js"]},config:{},setup:{},drawing:{enabled:!1,actions:["undo","redo","done","cancel"],undos:[],undo:function(){var n=t.drawing.undos.pop();n&&(t.drawing.redos.push(n),n.path.remove())},redos:[],redo:function(){var n=t.drawing.redos.pop();n&&(t.setup.fabric.add(n.path),t.drawing.undos.push(n))},done:function(){t.drawing.enabled=!1;t.drawing.undos=[];t.drawing.redos=[];t.createMenu(t.config.menu);t.setup.wrapper.setAttribute("class",t.setup.chart.classNamePrefix+"-export-canvas")}},defaults:{position:"top-right",fileName:"amCharts",action:"download",formats:{JPG:{mimeType:"image/jpg",extension:"jpg",capture:!0},PNG:{mimeType:"image/png",extension:"png",capture:!0},SVG:{mimeType:"text/xml",extension:"svg",capture:!0},PDF:{mimeType:"application/pdf",extension:"pdf",capture:!0},CSV:{mimeType:"text/plain",extension:"csv"},JSON:{mimeType:"text/plain",extension:"json"},XLSX:{mimeType:"application/octet-stream",extension:"xlsx"}},fabric:{backgroundColor:"#FFFFFF",isDrawingMode:!1,selection:!1,removeImages:!0},pdfMake:{pageSize:"A4",pageOrientation:"portrait",images:{},content:[{image:"reference",fit:[523.28,769.89]}]},divId:null,menuReviver:null,menuWalker:null,menu:[{"class":"export-main",label:"Export",menu:[{label:"Download as ...",menu:["PNG","JPG","SVG",{format:"PDF",content:["Saved from:",window.location.href,{image:"reference",fit:[523.28,769.89]}]}]},{label:"Save data ...",menu:["CSV","XLSX","JSON"]},{label:"Annotate",action:"draw",menu:[{"class":"export-drawing",menu:[{label:"Color ...",menu:[{"class":"export-drawing-color export-drawing-color-black",label:"Black",click:function(){this.setup.fabric.freeDrawingBrush.color="#000"}},{"class":"export-drawing-color export-drawing-color-white",label:"White",click:function(){this.setup.fabric.freeDrawingBrush.color="#fff"}},{"class":"export-drawing-color export-drawing-color-red",label:"Red",click:function(){this.setup.fabric.freeDrawingBrush.color="#f00"}},{"class":"export-drawing-color export-drawing-color-green",label:"Green",click:function(){this.setup.fabric.freeDrawingBrush.color="#0f0"}},{"class":"export-drawing-color export-drawing-color-blue",label:"Blue",click:function(){this.setup.fabric.freeDrawingBrush.color="#00f"}}]},"UNDO","REDO",{label:"Save as ...",menu:["PNG","JPG","SVG",{format:"PDF",content:["Saved from:",window.location.href,{image:"reference",fit:[523.28,769.89]}]}]},{format:"PRINT",label:"Print"},"CANCEL"]}]},{format:"PRINT",label:"Print"}]}],timer:0,fallback:{text:"CTRL + C to copy the data into the clipboard.",image:"Rightclick -> Save picture as... to save the image."}},download:function(n,i,r){var o;if(window.saveAs)o=t.toBlob({data:n,type:i},function(n){saveAs(n,r)});else if(t.config.fallback&&i=="text/plain"){var u=document.createElement("div"),f=document.createElement("div"),e=document.createElement("textarea");f.innerHTML=t.config.fallback.text;u.appendChild(f);u.appendChild(e);f.setAttribute("class","amcharts-export-fallback-message");u.setAttribute("class","amcharts-export-fallback");t.setup.chart.containerDiv.appendChild(u);e.setAttribute("readonly","");e.value=n;e.focus();e.select();t.createMenu([{"class":"export-main export-close",label:"Done",click:function(){t.createMenu(t.config.menu);t.setup.chart.containerDiv.removeChild(u)}}])}else if(t.config.fallback&&i.split("/")[0]=="image"){var u=document.createElement("div"),f=document.createElement("div"),s=t.toImage({data:n});f.innerHTML=t.config.fallback.image;u.appendChild(f);u.appendChild(s);f.setAttribute("class","amcharts-export-fallback-message");u.setAttribute("class","amcharts-export-fallback");t.setup.chart.containerDiv.appendChild(u);t.createMenu([{"class":"export-main export-close",label:"Done",click:function(){t.createMenu(t.config.menu);t.setup.chart.containerDiv.removeChild(u)}}])}else throw new Error("Unable to create file. Ensure saveAs (FileSaver.js) is supported.");return n},loadResource:function(n,i){function c(){if(i)for(u=0;u<i.length;u++)t.loadResource(i[u])}var u,o,r,f,e,h,s=n.indexOf("//")!=-1?n:[t.libs.path,n].join("");for(n.indexOf(".js")!=-1?(r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",s),t.libs.async&&r.setAttribute("async","")):n.indexOf(".css")!=-1&&(r=document.createElement("link"),r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",s)),u=0;u<document.head.childNodes.length;u++)if(f=document.head.childNodes[u],e=f?f.src||f.href:!1,h=f?f.tagName:!1,f&&e&&e.indexOf(n)!=-1){t.libs.reload&&document.head.removeChild(f);o=!0;break}(!o||t.libs.reload)&&(r.addEventListener("load",c),document.head.appendChild(r))},loadDependencies:function(){var n,i;if(t.libs.autoLoad)for(n=0;n<t.libs.resources.length;n++)if(t.libs.resources[n]instanceof Object)for(i in t.libs.resources[n])t.loadResource(i,t.libs.resources[n][i]);else t.loadResource(t.libs.resources[n])},pxToNumber:function(n){return Number(String(n).replace("px",""))||0},deepMerge:function(n,i,r){var f,u,e=i instanceof Array?"array":"object";for(f in i)e=="array"&&isNaN(f)||(u=i[f],(n[f]==undefined||r)&&(u instanceof Array?n[f]=[]:u instanceof Function?n[f]=new Function:u instanceof Date?n[f]=new Date:u instanceof Object?n[f]={}:u instanceof Number?n[f]=new Number:u instanceof String&&(n[f]=new String)),u instanceof Function||u instanceof Date||t.isElement(u)||!(u instanceof Object||u instanceof Array)?n instanceof Array&&!r?n.push(u):n[f]=u:t.deepMerge(n[f],u,r));return n},isElement:function(n){return n instanceof Object&&n&&n.nodeType===1},capture:function(i,r){for(var e,v,h=t.deepMerge(t.deepMerge({},t.config.fabric),i||{}),l=[],f={x:0,y:0,width:t.setup.chart.divRealWidth,height:t.setup.chart.divRealHeight},a=t.setup.chart.containerDiv.getElementsByTagName("svg"),o,c,y,p,w,b,u,s=0;s<a.length;s++){for(u={svg:a[s],parent:a[s].parentNode,offset:{x:0,y:0},patterns:{},clippings:{}},o=a[s].getElementsByTagName("clipPath"),e=0;e<o.length;e++){for(v=0;v<o[e].childNodes.length;v++)o[e].childNodes[v].setAttribute("fill","transparent");u.clippings[o[e].id]=o[e]}for(o=a[s].getElementsByTagName("pattern"),e=0;e<o.length;e++)c={node:o[e],source:o[e].getAttribute("xlink:href"),width:Number(o[e].getAttribute("width")),height:Number(o[e].getAttribute("height")),repeat:"repeat"},y=o[e].getElementsByTagName("rect"),y.length>0&&(p=new Image,p.src=c.source,w=new fabric.StaticCanvas(undefined,{width:c.width,height:c.height,backgroundColor:y[0].getAttribute("fill")}),b=new fabric.Rect({width:c.width,height:c.height,fill:new fabric.Pattern({source:p,repeat:"repeat"})}),w.add(b),c.source=w.toDataURL()),u.patterns[o[e].id]=new fabric.Pattern(c);l.push(u)}t.config.legend&&t.setup.chart.legend&&t.setup.chart.legend.position=="outside"&&(u={svg:t.setup.chart.legend.container.container,parent:t.setup.chart.legend.container.div,offset:{x:0,y:0},legend:{type:["top","left"].indexOf(t.config.legend.position)!=-1?"unshift":"push",position:t.config.legend.position,width:t.config.legend.width?t.config.legend.width:t.setup.chart.legend.container.width,height:t.config.legend.height?t.config.legend.height:t.setup.chart.legend.container.height}},["left","right"].indexOf(u.legend.position)!=-1?(f.width+=u.legend.width,f.height=u.legend.height>f.height?u.legend.height:f.height):["top","bottom"].indexOf(u.legend.position)!=-1&&(f.height+=u.legend.height),l[u.legend.type](u));t.setup.chart.type=="stock"&&(t.setup.chart.leftContainer&&(f.width-=t.pxToNumber(t.setup.chart.leftContainer.style.width),t.setup.wrapper.style.paddingLeft=t.pxToNumber(t.setup.chart.leftContainer.style.width)+t.setup.chart.panelsSettings.panelSpacing*2),t.setup.chart.rightContainer&&(f.width-=t.pxToNumber(t.setup.chart.rightContainer.style.width),t.setup.wrapper.style.paddingRight=t.pxToNumber(t.setup.chart.rightContainer.style.width)+t.setup.chart.panelsSettings.panelSpacing*2),t.setup.chart.periodSelector&&["top","bottom"].indexOf(t.setup.chart.periodSelector.position)!=-1&&(f.height-=t.setup.chart.periodSelector.offsetHeight+t.setup.chart.panelsSettings.panelSpacing),t.setup.chart.dataSetSelector&&["top","bottom"].indexOf(t.setup.chart.dataSetSelector.position)!=-1&&(f.height-=t.setup.chart.dataSetSelector.offsetHeight));t.drawing.enabled=h.isDrawingMode=h.drawing&&h.drawing.enabled?!0:h.action=="draw";t.setup.wrapper?t.setup.wrapper.innerHTML="":(t.setup.wrapper=document.createElement("div"),t.setup.wrapper.setAttribute("class",t.setup.chart.classNamePrefix+"-export-canvas"),t.setup.wrapper.appendChild(t.setup.canvas));t.setup.canvas=document.createElement("canvas");t.setup.wrapper.appendChild(t.setup.canvas);t.setup.fabric=new fabric.Canvas(t.setup.canvas,t.deepMerge({width:f.width,height:f.height},h));t.deepMerge(t.setup.fabric,h);t.setup.fabric.on("path:created",function(n){t.drawing.undos.push(n)});for(t.drawing.enabled?t.setup.wrapper.setAttribute("class",t.setup.chart.classNamePrefix+"-export-canvas active"):t.setup.wrapper.setAttribute("class",t.setup.chart.classNamePrefix+"-export-canvas"),s=0;s<l.length;s++)u=l[s],u.parent.style.top||u.parent.style.left?(u.offset.y=t.pxToNumber(u.parent.style.top),u.offset.x=t.pxToNumber(u.parent.style.left)):(u.legend?u.legend.position=="left"?f.x+=n.legend.container.width:u.legend.position=="right"?u.offset.x+=f.width-u.legend.width:u.legend.position=="top"?f.y+=u.legend.height:u.legend.position=="bottom"&&(u.offset.y+=f.height-u.legend.height):(u.offset.x=f.x,u.offset.y=f.y,f.y+=t.pxToNumber(u.parent.style.height)),u.parent&&(u.parent.getAttribute("class")||"").split(" ").indexOf("amChartsLegend")!=-1&&(f.y+=t.pxToNumber(u.parent.parentNode.parentNode.style.marginTop),u.offset.y+=t.pxToNumber(u.parent.parentNode.parentNode.style.marginTop))),fabric.parseSVGDocument(u.svg,function(n){return function(i,u){for(var e=fabric.util.groupSVGElements(i,u),w={top:n.offset.y,left:n.offset.x},o,p,c,a,y,f=0;f<e.paths.length;f++)if(e.paths[f]){if(h.removeImages&&e.paths[f]["xlink:href"]&&e.paths[f]["xlink:href"].indexOf("//")!=-1&&e.paths[f]["xlink:href"].indexOf(location.origin)==-1){e.paths.splice(f,1);continue}e.paths[f].fill instanceof Object?(e.paths[f].fill.type=="radial"&&(e.paths[f].fill.coords.r2=e.paths[f].fill.coords.r1*-1,e.paths[f].fill.coords.r1=0),e.paths[f].set({opacity:e.paths[f].fillOpacity})):String(e.paths[f].fill).slice(0,3)=="url"&&(o=e.paths[f].fill.slice(5,-1),n.patterns[o]&&e.paths[f].set({fill:n.patterns[o],opacity:e.paths[f].fillOpacity}));String(e.paths[f].clipPath).slice(0,3)=="url"&&(o=e.paths[f].clipPath.slice(5,-1),n.clippings[o]&&(p=n.clippings[o].childNodes[0],c=e.paths[f].svg.getAttribute("transform")||"translate(0,0)",c=c.slice(10,-1).split(","),e.paths[f].set({clipTo:function(n,t){return function(i){var r=Number(n.getAttribute("width")||"0"),u=Number(n.getAttribute("height")||"0"),f=Number(n.getAttribute("x")||"0"),e=Number(n.getAttribute("y")||"0");i.rect(Number(t[0])*-1+f,Number(t[1])*-1+e,r,u)}}(p,c)})))}if(e.set(w),t.setup.fabric.add(e),n.svg.parentNode&&n.svg.parentNode.getElementsByTagName)for(a=n.svg.parentNode.getElementsByClassName(t.setup.chart.classNamePrefix+"-balloon-div"),f=0;f<a.length;f++)if(h.balloonFunction instanceof Function)h.balloonFunction.apply(t,[a[f],n]);else{var v=a[f],s=v.childNodes[0],y=new fabric.Text(s.innerText||s.innerHTML,{fontSize:t.pxToNumber(s.style.fontSize),fontFamily:s.style.fontFamily,fill:s.style.color,top:t.pxToNumber(v.style.top)+n.offset.y,left:t.pxToNumber(v.style.left)+n.offset.x});t.setup.fabric.add(y)}n.svg.nextSibling&&n.svg.nextSibling.tagName=="A"&&(y=new fabric.Text(n.svg.nextSibling.innerText||n.svg.nextSibling.innerHTML,{fontSize:t.pxToNumber(n.svg.nextSibling.style.fontSize),fontFamily:n.svg.nextSibling.style.fontFamily,fill:n.svg.nextSibling.style.color,top:t.pxToNumber(n.svg.nextSibling.style.top)+n.offset.y,left:t.pxToNumber(n.svg.nextSibling.style.left)+n.offset.x}),t.setup.fabric.add(y));l.pop();l.length||t.handleCallback(r)}}(u),function(n,i){var u,h=n.getAttribute("class")||n.parentNode.getAttribute("class")||"",c=n.getAttribute("visibility")||n.parentNode.getAttribute("visibility")||n.parentNode.parentNode.getAttribute("visibility")||"",l=n.getAttribute("clip-path")||n.parentNode.getAttribute("clip-path")||"",e;if(i.className=h,i.clipPath=l,i.svg=n,c=="hidden")i.opacity=0;else for(e=["fill","stroke"],u=0;u<e.length;u++){var f=e[u],s=String(n.getAttribute(f)||""),o=Number(n.getAttribute(f+"-opacity")||"1"),r=fabric.Color.fromHex(s).getSource();i.className!=t.setup.chart.classNamePrefix+"-guide-fill"||s||(o=0,r=fabric.Color.fromHex("#000000").getSource());r&&(r.pop(),r.push(o),i[f]="rgba("+r.join()+")",i[t.capitalize(f+"-opacity")]=o)}})},toCanvas:function(n,i){var u=t.deepMerge({},n||{}),r=t.setup.canvas;return t.handleCallback(i,r),r},toImage:function(n,i){var r=t.deepMerge({format:"png",quality:1,multiplier:1},n||{}),f=r.data,u=document.createElement("img");return r.data||(f=r.lossless||r.format=="svg"?t.toSVG(t.deepMerge(r,{getBase64:!0})):t.setup.fabric.toDataURL(r)),u.setAttribute("src",f),t.handleCallback(i,u),u},toBlob:function(n,i){var r=t.deepMerge({data:"empty",type:"text/plain"},n||{}),u=/^data:.+;base64,(.*)$/.exec(r.data);return u&&(r.data=u[0],r.type=r.data.slice(5,r.data.indexOf(",")-7),r.data=t.toByteArray({data:r.data.slice(r.data.indexOf(",")+1,r.data.length)})),data=r.getByteArray?r.data:new Blob([r.data],{type:r.type}),t.handleCallback(i,data),data},toJPG:function(n,i){var u=t.deepMerge({format:"jpeg",quality:1,multiplier:1},n||{}),r=t.setup.fabric.toDataURL(u);return t.handleCallback(i,r),r},toPNG:function(n,i){var u=t.deepMerge({format:"png",quality:1,multiplier:1},n||{}),r=t.setup.fabric.toDataURL(u);return t.handleCallback(i,r),r},toSVG:function(n,i){var u=t.deepMerge({},n||{}),r=t.setup.fabric.toSVG(u);return u.getBase64&&(r="data:image/svg+xml;base64,"+btoa(r)),t.handleCallback(i,r),r},toPDF:function(n,i){var r=t.deepMerge(t.deepMerge({multiplier:2},t.config.pdfMake),n||{},!0),u;return r.images.reference=t.toPNG(r),u=new pdfMake.createPdf(r),i&&u.getDataUrl(function(n){return function(){n.apply(t,arguments)}}(i)),u},toPRINT:function(n,i){var r,e=t.deepMerge({delay:1,lossless:!1},n||{}),f=t.toImage(e),o=[],u=document.body.childNodes;for(f.setAttribute("style","width: 100%; max-height: 100%;"),r=0;r<u.length;r++)t.isElement(u[r])&&(o[r]=u[r].style.display,u[r].style.display="none");return document.body.appendChild(f),window.print(),setTimeout(function(){for(r=0;r<u.length;r++)t.isElement(u[r])&&(u[r].style.display=o[r]);document.body.removeChild(f);t.handleCallback(i,f)},e.delay),f},toJSON:function(n,i){var u=t.deepMerge({data:t.getChartData()},n||{},!0),r=JSON.stringify(u.data,undefined,"\t");return t.handleCallback(i,r),r},toCSV:function(n,i){function l(n,t){return typeof n=="string"?n=n:t&&r.dateFormat&&n instanceof Date&&r.dateFields.indexOf(t)!=-1&&(n=AmCharts.formatDate(n,r.dateFormat)),typeof n=="string"&&(r.escape&&(n=n.replace('"','""')),r.quotes&&(n=['"',n,'"'].join(""))),n}var o,s,r=t.deepMerge({data:t.getChartData(),delimiter:",",quotes:!0,escape:!0,dateFields:[],dateFormat:t.setup.chart.dataDateFormat||"YYYY-MM-DD"},n||{},!0),e="",h=[],u=[],c,f;t.setup.chart.categoryAxis&&t.setup.chart.categoryAxis.parseDates&&t.setup.chart.categoryField&&r.dateFields.push(t.setup.chart.categoryField);for(f in r.data[0])u.push(l(f)),h.push(f);e+=u.join(r.delimiter)+"\n";for(o in r.data)if(u=[],!isNaN(o)){for(s in h)isNaN(s)||(c=h[s],f=r.data[o][c],u.push(l(f,c)));e+=u.join(r.delimiter)+"\n"}return t.handleCallback(i,e),e},toXLSX:function(n,i){function e(n,t){t&&(n+=1462);var i=Date.parse(n);return(i-new Date(Date.UTC(1899,11,30)))/864e5}function o(n){for(var u,t,o,f={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},r=0;r!=n.length;++r)for(u=0;u!=n[r].length;++u)(i.s.r>r&&(i.s.r=r),i.s.c>u&&(i.s.c=u),i.e.r<r&&(i.e.r=r),i.e.c<u&&(i.e.c=u),t={v:n[r][u]},t.v!=null)&&(o=XLSX.utils.encode_cell({c:u,r:r}),typeof t.v=="number"?t.t="n":typeof t.v=="boolean"?t.t="b":t.v instanceof Date?(t.t="n",t.z=XLSX.SSF._table[14],t.v=e(t.v)):t.t="s",f[o]=t);return i.s.c<1e7&&(f["!ref"]=XLSX.utils.encode_range(i)),f}var u=t.deepMerge({data:t.getChartData(),name:"amCharts",withHeader:!0},n||{},!0),r="",f={SheetNames:[],Sheets:{}};return f.SheetNames.push(u.name),f.Sheets[u.name]=o(t.toArray(u)),r=XLSX.write(f,{bookType:"xlsx",bookSST:!0,type:"base64"}),r="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,"+r,t.handleCallback(i,r),r},toArray:function(n,i){var s,u=t.deepMerge({data:t.getChartData(),dateFields:[],dateFormat:!1,withHeader:!1},n||{},!0),e=[],o=[],h,r,f;if(u.withHeader){for(r in u.data[0])o.push(r);e.push(o)}for(s in u.data)if(h=[],!isNaN(s)){for(r in o)r=o[r],f=u.data[s][r]||"",f=u.dateFormat&&f instanceof Date&&u.dateFields.indexOf(r)!=-1?AmCharts.formatDate(f,u.dateFormat):String(f),h.push(f);e.push(h)}return t.handleCallback(i,e),e},toByteArray:function(n,i){function r(n){var t=n.charCodeAt(0);return t===c?62:t===l?63:t<u?-1:t<u+10?t-u+26+26:t<e+26?t-e:t<f+26?t-f+26:void 0}function a(n){function u(n){e[l++]=n}var t,s,c,i,f,e,o,l;if(n.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");for(o=n.length,f="="===n.charAt(o-2)?2:"="===n.charAt(o-1)?1:0,e=new h(n.length*3/4-f),c=f>0?n.length-4:n.length,l=0,t=0,s=0;t<c;t+=4,s+=3)i=r(n.charAt(t))<<18|r(n.charAt(t+1))<<12|r(n.charAt(t+2))<<6|r(n.charAt(t+3)),u((i&16711680)>>16),u((i&65280)>>8),u(i&255);return f===2?(i=r(n.charAt(t))<<2|r(n.charAt(t+1))>>4,u(i&255)):f===1&&(i=r(n.charAt(t))<<10|r(n.charAt(t+1))<<4|r(n.charAt(t+2))>>2,u(i>>8&255),u(i&255)),e}var s=t.deepMerge({},n||{}),h=typeof Uint8Array!="undefined"?Uint8Array:Array,c="+".charCodeAt(0),l="/".charCodeAt(0),u="0".charCodeAt(0),f="a".charCodeAt(0),e="A".charCodeAt(0),o=a(s.data);return t.handleCallback(i,o),o},handleCallback:function(n,i){n&&n.apply(t,[i])},getChartData:function(){var i=[],r,n,u;if(t.setup.chart.type=="stock")i=t.setup.chart.mainDataSet.dataProvider;else if(t.setup.chart.type=="gantt"){for(r=t.setup.chart.segmentsField,n=0;n<t.setup.chart.dataProvider.length;n++)if(t.setup.chart.dataProvider[n][r])for(u=0;u<t.setup.chart.dataProvider[n][r].length;u++)i.push(t.setup.chart.dataProvider[n][r][u])}else i=t.setup.chart.dataProvider;return i},capitalize:function(n){return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()},createMenu:function(i,r){function u(i,r){for(var h=document.createElement("ul"),o=0;o<i.length;o++){var f=typeof i[o]=="string"?{format:i[o]}:i[o],e=document.createElement("li"),s=document.createElement("a"),l=document.createElement("img"),a=document.createElement("span"),c=String(f.action?f.action:f.format).toLowerCase();if(f.format=String(f.format).toUpperCase(),t.config.formats[f.format]?f=t.deepMerge({label:f.icon?"":f.format,format:f.format,mimeType:t.config.formats[f.format].mimeType,extension:t.config.formats[f.format].extension,capture:t.config.formats[f.format].capture,action:t.config.action,fileName:t.config.fileName},f):f.menu||f.items||(f.label=f.label?f.label:t.capitalize(c)),["CSV","JSON","XLSX"].indexOf(f.format)!=-1&&["map","gauge"].indexOf(t.setup.chart.type)!=-1)continue;else if(AmCharts.isIE&&AmCharts.IEversion<10&&f.format!="UNDEFINED"&&f.mimeType&&f.mimeType.split("/")[0]!="image"&&f.mimeType!="text/plain")continue;f.click||f.menu||f.items?f.action=="draw"&&(f.click=function(n){return function(){this.capture(n,function(){this.createMenu(n.menu)})}}(f)):t.drawing.actions.indexOf(c)!=-1?(f.action=c,f.click=function(n){return function(){this.drawing[n.action]()}}(f)):t.drawing.enabled?f.click=function(n){return function(){this["to"+n.format](n,function(t){this.drawing.done();n.action!="print"&&n.format!="PRINT"&&this.download(t,n.mimeType,[n.fileName,n.extension].join("."))})}}(f):f.format!="UNDEFINED"&&(f.click=function(n){return function(){if(n.capture||n.action=="print"||n.format=="PRINT")this.capture(n,function(){this["to"+n.format](n,function(t){n.action=="download"&&this.download(t,n.mimeType,[n.fileName,n.extension].join("."))})});else if(this["to"+n.format])this["to"+n.format](n,function(t){this.download(t,n.mimeType,[n.fileName,n.extension].join("."))});else throw new Error("Invalid format. Could not determine output type.");}}(f));s.setAttribute("href","#");s.addEventListener("click",function(n){return function(i){n.apply(t,arguments);i.preventDefault()}}(f.click||function(n){n.preventDefault()}));e.appendChild(s);a.innerHTML=f.label;f["class"]&&(e.className=f["class"]);f.icon&&(l.setAttribute("src",(f.icon.slice(0,10).indexOf("//")==-1?n.pathToImages:"")+f.icon),s.appendChild(l));f.label&&s.appendChild(a);f.title&&s.setAttribute("title",f.title);t.config.menuReviver&&(e=t.config.menuReviver.apply(t,[f,e]));(f.menu||f.items)&&f.action!="draw"?u(f.menu||f.items,e).childNodes.length&&h.appendChild(e):h.appendChild(e)}return r.appendChild(h)}return r||(typeof t.config.divId=="string"?t.config.divId=r=document.getElementById(t.config.divId):r=t.isElement(t.config.divId)?t.config.divId:t.setup.chart.containerDiv),t.isElement(t.setup.menu)?t.setup.menu.innerHTML="":t.setup.menu=document.createElement("div"),t.setup.menu.setAttribute("class",t.setup.chart.classNamePrefix+"-export-menu "+t.setup.chart.classNamePrefix+"-export-menu-"+t.config.position+" amExportButton"),t.config.menuWalker&&(u=t.config.menuWalker),u.apply(this,[i,t.setup.menu]),r.appendChild(t.setup.menu),t.setup.menu},migrateSetup:function(n){if(n.amExport||n.exportConfig){var i=t.deepMerge({enabled:!0,migrated:!0,libs:{autoLoad:!1}},t.deepMerge(t.defaults,{menu:[]},!0));function r(n){var t,u;for(t in n)u=n[t],t.slice(0,6)=="export"&&u?i.menu.push(t.slice(6)):t=="userCFG"?r(u):t=="menuItems"?i.menu=u:t=="libs"&&(i.libs=u)}r(n.amExport||n.exportConfig);n["export"]=i}return n},init:function(){clearTimeout(t.timer);t.timer=setInterval(function(){t.setup.chart.containerDiv&&(clearTimeout(t.timer),t.setup.canvas=document.createElement("canvas"),t.setup.wrapper=document.createElement("div"),t.setup.wrapper.setAttribute("class",t.setup.chart.classNamePrefix+"-export-canvas"),t.setup.wrapper.appendChild(t.setup.canvas),t.setup.chart.containerDiv.appendChild(t.setup.wrapper),t.setup.chart.AmExport=t,t.createMenu(t.config.menu))},AmCharts.updateRate)}};(t.drawing.cancel=t.drawing.done,t.setup.chart=t.migrateSetup(n),undefined!==t.setup.chart["export"]&&t.setup.chart["export"].enabled)&&((t.deepMerge(t.libs,t.setup.chart["export"].libs||{},!0),t.deepMerge(t.defaults.pdfMake,t.setup.chart["export"]),t.deepMerge(t.defaults.fabric,t.setup.chart["export"]),t.config=t.deepMerge(t.defaults,t.setup.chart["export"],!0),AmCharts.isIE&&AmCharts.IEversion<=9&&(!document.head||t.config.fallback===!1))||(t.setup.chart["export"]=t,t.setup.chart.addClassNames=!0,t.loadDependencies(t.libs.resources,t.libs.reload),t.init()))},["pie","serial","xy","funnel","radar","gauge","stock","map","gantt"]);
//# sourceMappingURL=export.min.js.map
